
Deprecated: The each() function is deprecated. This message will be suppressed on further calls in C:\Users\trazo\AppData\Roaming\Sublime Text 3\Packages\PHPTools\php.tools\codeFormatter.php on line 54
<?php
include_once ('bd/conexao.php');

$acao = $_GET['acao']??'redirect';
//deletar, salvar, alterar

if (isset($_GET['id']) && $acao == 'deletar') {
	$id = $_GET['id'];

	$sql = "DELETE FROM categoria WHERE id = {$id}";

	$qr = mysqli_query($conexao, $sql);

	$mensagem = 'ExcluÃ­do com sucesso!';

	header("Location: categorias.php?mensagem={$mensagem}&alert=success");
} else if ($acao == 'salvar') {

	$categoria = $_POST['categoria'];
	$tipo      = $_POST['tipo'];

	$sql = "INSERT INTO categoria (categoria, tipo) VALUES ('$categoria', '$tipo');";

	if (mysqli_query($conexao, $sql)) {
		$mensagem = 'Salvo com sucesso!';
		$alert    = 'success';

	} else {
		$mensagem = 'Erro ao salvar: '.mysqli_error($conexao);
		$alert    = 'danger';
	}

	header("Location: categorias.php?mensagem={$mensagem}&alert={$alert}");
}

?>